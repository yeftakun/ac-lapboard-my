import{r as l}from"./index.CVf8TyFT.js";var g={exports:{}},j={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E=l,R=Symbol.for("react.element"),O=Symbol.for("react.fragment"),w=Object.prototype.hasOwnProperty,F=E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,L={key:!0,ref:!0,__self:!0,__source:!0};function _(n,a,i){var s,m={},o=null,x=null;i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),a.ref!==void 0&&(x=a.ref);for(s in a)w.call(a,s)&&!L.hasOwnProperty(s)&&(m[s]=a[s]);if(n&&n.defaultProps)for(s in a=n.defaultProps,a)m[s]===void 0&&(m[s]=a[s]);return{$$typeof:R,type:n,key:o,ref:x,props:m,_owner:F.current}}j.Fragment=O;j.jsx=_;j.jsxs=_;g.exports=j;var t=g.exports;const P=new Intl.DateTimeFormat("id-ID",{year:"numeric",month:"short",day:"numeric"});function h(n){return String(n??"").toLowerCase()}const M=[{key:"track",label:"Track"},{key:"car",label:"Car"},{key:"laptime_ms",label:"Lap"},{key:"date",label:"Date"}];function A({rows:n=[]}){const[a,i]=l.useState({track:"",car:""}),[s,m]=l.useState("date"),[o,x]=l.useState("desc"),d=Array.isArray(n)?n:[],N=l.useMemo(()=>{const e=new Map;for(const r of d){const c=e.get(r.track);(!c||r.laptime_ms<c.laptime_ms)&&e.set(r.track,r)}return e},[d]),y=l.useMemo(()=>Array.from(new Set(d.map(e=>e.track))).sort(),[d]),v=l.useMemo(()=>Array.from(new Set(d.map(e=>e.car))).sort(),[d]),S=y.includes(a.track)?a.track:"",C=v.includes(a.car)?a.car:"",b=l.useMemo(()=>{const e=h(a.track||""),r=h(a.car||"");return d.filter(c=>{const u=e?h(c.track).includes(e):!0,p=r?h(c.car).includes(r):!0;return u&&p})},[d,a]),k=l.useMemo(()=>{const e=(c,u)=>u==="date"?new Date(c.date).getTime():c[u],r=[...b];return r.sort((c,u)=>{const p=e(c,s),f=e(u,s);return p===f?0:o==="asc"?p>f?1:-1:p<f?1:-1}),r},[b,s,o]),T=()=>i({track:"",car:""}),D=e=>{s===e?x(r=>r==="asc"?"desc":"asc"):(m(e),x("desc"))};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"filter-grid",children:[t.jsxs("label",{className:"space-y-2 text-sm uppercase tracking-wide text-[var(--muted)]",children:[t.jsx("span",{children:"Track"}),t.jsx("input",{placeholder:"Cari track",value:a.track,onChange:e=>i(r=>({...r,track:e.target.value}))})]}),t.jsxs("label",{className:"space-y-2 text-sm uppercase tracking-wide text-[var(--muted)]",children:[t.jsx("span",{children:"Car"}),t.jsx("input",{placeholder:"Cari mobil",value:a.car,onChange:e=>i(r=>({...r,car:e.target.value}))})]}),t.jsxs("label",{className:"space-y-2 text-sm uppercase tracking-wide text-[var(--muted)]",children:[t.jsx("span",{children:"Preset Track"}),t.jsxs("select",{value:S,onChange:e=>i(r=>({...r,track:e.target.value})),children:[t.jsx("option",{value:"",children:"Semua track"}),y.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),t.jsxs("label",{className:"space-y-2 text-sm uppercase tracking-wide text-[var(--muted)]",children:[t.jsx("span",{children:"Preset Car"}),t.jsxs("select",{value:C,onChange:e=>i(r=>({...r,car:e.target.value})),children:[t.jsx("option",{value:"",children:"Semua mobil"}),v.map(e=>t.jsx("option",{value:e,children:e},e))]})]})]}),t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 text-sm text-[var(--muted)]",children:[t.jsxs("span",{children:[k.length," lap • ",a.track||a.car?"Filter aktif":"Semua data"]}),t.jsx("button",{type:"button",className:"btn btn-ghost text-xs",onClick:T,children:"Reset filter"})]}),t.jsx("div",{className:"table-wrapper overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{children:[t.jsx("thead",{children:t.jsxs("tr",{children:[M.map(e=>t.jsxs("th",{role:"columnheader","aria-sort":s===e.key?o==="asc"?"ascending":"descending":"none",onClick:()=>D(e.key),className:"cursor-pointer select-none",children:[e.label,s===e.key?o==="asc"?" ↑":" ↓":""]},e.key)),t.jsx("th",{children:"Notes"})]})}),t.jsx("tbody",{children:k.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"py-8 text-center text-sm text-[var(--muted)]",children:"Tidak ada data yang cocok dengan filter."})}):k.map((e,r)=>{const c=N.get(e.track)?.laptime_ms===e.laptime_ms;return t.jsxs("tr",{children:[t.jsx("td",{className:"font-medium",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{children:e.track}),t.jsx("span",{className:"text-xs text-[var(--muted)]",children:P.format(new Date(e.date))})]})}),t.jsx("td",{children:e.car}),t.jsxs("td",{className:"tabular-nums text-lg font-semibold",children:[e.laptime_display||`${Math.round(e.laptime_ms)} ms`,c&&t.jsx("span",{className:"badge-pb ml-3",children:"PB"})]}),t.jsx("td",{children:e.date}),t.jsx("td",{className:"text-xs text-[var(--muted)]",children:"Hotlap"})]},`${e.track}-${e.car}-${e.date}-${r}`)})})]})})})]})}export{A as default};
