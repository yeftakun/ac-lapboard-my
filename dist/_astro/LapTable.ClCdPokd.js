import{r as i}from"./index.CVf8TyFT.js";var b={exports:{}},f={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S=i,C=Symbol.for("react.element"),T=Symbol.for("react.fragment"),D=Object.prototype.hasOwnProperty,E=S.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,R={key:!0,ref:!0,__self:!0,__source:!0};function g(c,a,o){var s,d={},l=null,u=null;o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),a.ref!==void 0&&(u=a.ref);for(s in a)D.call(a,s)&&!R.hasOwnProperty(s)&&(d[s]=a[s]);if(c&&c.defaultProps)for(s in a=c.defaultProps,a)d[s]===void 0&&(d[s]=a[s]);return{$$typeof:C,type:c,key:l,ref:u,props:d,_owner:E.current}}f.Fragment=T;f.jsx=g;f.jsxs=g;b.exports=f;var t=b.exports;const O=new Intl.DateTimeFormat("id-ID",{year:"numeric",month:"short",day:"numeric"});function h(c){return String(c??"").toLowerCase()}const F=[{key:"track",label:"Track"},{key:"car",label:"Car"},{key:"laptime_ms",label:"Lap"},{key:"date",label:"Date"}];function $({rows:c=[]}){const[a,o]=i.useState({track:"",car:""}),[s,d]=i.useState("date"),[l,u]=i.useState("desc"),x=Array.isArray(c)?c:[],v=i.useMemo(()=>{const e=new Map;for(const r of x){const n=e.get(r.track);(!n||r.laptime_ms<n.laptime_ms)&&e.set(r.track,r)}return e},[x]),j=i.useMemo(()=>{const e=h(a.track||""),r=h(a.car||"");return x.filter(n=>{const m=e?h(n.track).includes(e):!0,p=r?h(n.car).includes(r):!0;return m&&p})},[x,a]),k=i.useMemo(()=>{const e=(n,m)=>m==="date"?new Date(n.date).getTime():n[m],r=[...j];return r.sort((n,m)=>{const p=e(n,s),y=e(m,s);return p===y?0:l==="asc"?p>y?1:-1:p<y?1:-1}),r},[j,s,l]),_=()=>o({track:"",car:""}),N=e=>{s===e?u(r=>r==="asc"?"desc":"asc"):(d(e),u("desc"))};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"filter-grid",style:{gridTemplateColumns:"repeat(auto-fit,minmax(240px,1fr))"},children:[t.jsxs("label",{className:"space-y-2 text-sm uppercase tracking-wide text-[var(--muted)]",children:[t.jsx("span",{children:"Track"}),t.jsx("input",{placeholder:"Cari track",value:a.track,onChange:e=>o(r=>({...r,track:e.target.value}))})]}),t.jsxs("label",{className:"space-y-2 text-sm uppercase tracking-wide text-[var(--muted)]",children:[t.jsx("span",{children:"Car"}),t.jsx("input",{placeholder:"Cari mobil",value:a.car,onChange:e=>o(r=>({...r,car:e.target.value}))})]})]}),t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 text-sm text-[var(--muted)]",children:[t.jsxs("span",{children:[k.length," lap • ",a.track||a.car?"Filter aktif":"Semua data"]}),t.jsx("button",{type:"button",className:"btn btn-ghost text-xs",onClick:_,children:"Reset filter"})]}),t.jsx("div",{className:"table-wrapper overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{children:[t.jsx("thead",{children:t.jsx("tr",{children:F.map(e=>t.jsxs("th",{role:"columnheader","aria-sort":s===e.key?l==="asc"?"ascending":"descending":"none",onClick:()=>N(e.key),className:"cursor-pointer select-none",children:[e.label,s===e.key?l==="asc"?" ↑":" ↓":""]},e.key))})}),t.jsx("tbody",{children:k.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:4,className:"py-8 text-center text-sm text-[var(--muted)]",children:"Tidak ada data yang cocok dengan filter."})}):k.map((e,r)=>{const n=v.get(e.track)?.laptime_ms===e.laptime_ms;return t.jsxs("tr",{children:[t.jsx("td",{className:"font-medium",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{children:e.track}),t.jsx("span",{className:"text-xs text-[var(--muted)]",children:O.format(new Date(e.date))})]})}),t.jsx("td",{children:e.car}),t.jsxs("td",{className:"tabular-nums text-lg font-semibold",children:[e.laptime_display||`${Math.round(e.laptime_ms)} ms`,n&&t.jsx("span",{className:"badge-pb ml-3",children:"PB"})]}),t.jsx("td",{children:e.date})]},`${e.track}-${e.car}-${e.date}-${r}`)})})]})})})]})}export{$ as default};
